import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.uQk9_EO2.js";const t="/docs/cocos/assets/audiosource.CdUrLSuT.png",l="/docs/cocos/assets/audiocilp.BBU_UgDC.gif",h="data:image/png;base64,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",u=JSON.parse('{"title":"AudioSource 组件参考","description":"","frontmatter":{},"headers":[],"relativePath":"zh/audio-system/audiosource.md","filePath":"zh/audio-system/audiosource.md","lastUpdated":1712305443000}'),p={name:"zh/audio-system/audiosource.md"},k=n('<h1 id="audiosource-组件参考" tabindex="-1">AudioSource 组件参考 <a class="header-anchor" href="#audiosource-组件参考" aria-label="Permalink to &quot;AudioSource 组件参考&quot;">​</a></h1><p>AudioSource 组件用于控制音乐和音效的播放。</p><p><img src="'+t+'" alt="audioSource"></p><p>在 <strong>层级管理器</strong> 中选中节点，然后点击 <strong>属性检查器</strong> 下方的 <strong>添加组件</strong> 按钮，选择 <strong>Audio -&gt; AudioSource</strong> 即可添加 AudioSource 组件到节点上。</p><h2 id="audiosource-属性" tabindex="-1">AudioSource 属性 <a class="header-anchor" href="#audiosource-属性" aria-label="Permalink to &quot;AudioSource 属性&quot;">​</a></h2><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Clip</td><td style="text-align:left;">添加的用于播放的 <a href="./../asset/audio">音频资源</a>，默认为空，点击后面的箭头按钮即可选择</td></tr><tr><td style="text-align:left;">Loop</td><td style="text-align:left;">是否循环播放</td></tr><tr><td style="text-align:left;">PlayOnAwake</td><td style="text-align:left;">是否在游戏运行（组件激活）时自动播放音频</td></tr><tr><td style="text-align:left;">Volume</td><td style="text-align:left;">音量大小，范围在 0~1 之间</td></tr></tbody></table><h2 id="音频播放" tabindex="-1">音频播放 <a class="header-anchor" href="#音频播放" aria-label="Permalink to &quot;音频播放&quot;">​</a></h2><p>Cocos Creator 3.x 使用 AudioSource 控制音频的播放。AudioSource 是组件，可以添加到场景中，由 <strong>编辑器</strong> 设置，也可以在 <strong>脚本</strong> 中进行调用。</p><p>另外，Creator 根据音频的长短将其分为较长的 <strong>音乐</strong> 和短的 <strong>音效</strong> 两种：</p><ul><li>若通过编辑器控制音频播放，则播放音乐和音效没有区别，但推荐使用长音乐。详情可参考下文 <strong>通过编辑器播放</strong> 部分的内容。</li><li>若通过脚本控制音频播放，则 AudioSource 组件额外提供了 <code>playOneShot</code> 接口用于播放短音效，详情请参考下文 <strong>音效播放</strong> 部分的内容。</li></ul><blockquote><p><strong>注意</strong>：Cocos Creator 3.x 移除了 v2.x 中的 <code>audioEngine</code> API，统一使用 AudioSource 组件播放音频。</p></blockquote><h3 id="通过编辑器" tabindex="-1">通过编辑器 <a class="header-anchor" href="#通过编辑器" aria-label="Permalink to &quot;通过编辑器&quot;">​</a></h3><ol><li><p>在节点上添加 AudioSource 组件。</p></li><li><p>将所需的音频资源从 <strong>资源管理器</strong> 拖拽到 AudioSource 组件的 Clip 属性框中，如下所示：</p><p><img src="'+l+`" alt="audioClip"></p></li><li><p>根据需要对 AudioSource 组件的其他属性进行设置即可。</p></li></ol><h3 id="通过脚本" tabindex="-1">通过脚本 <a class="header-anchor" href="#通过脚本" aria-label="Permalink to &quot;通过脚本&quot;">​</a></h3><p>如果要更灵活地控制 AudioSource 播放音频，可以将自定义脚本添加到 <strong>AudioSource 组件</strong> 所在的节点，然后调用相应的 API 来控制音频播放。</p><ol><li><p>在节点上添加 AudioSource 组件并指定音频资源。</p></li><li><p>在 <strong>资源管理器</strong> 中 <a href="./../scripting/setup">创建脚本</a> 并命名（例如 <code>AudioController</code>），然后双击打开脚本进行编写，内容如下：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component, Node, AudioSource, assert } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AudioController&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> _audioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 获取 AudioSource 组件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> audioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 检查是否含有 AudioSource，如果没有，则输出错误消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(audioSource);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 将组件赋到全局变量 _audioSource 中</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._audioSource </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioSource;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 播放音乐</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._audioSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    pause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 暂停音乐</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._audioSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>在 <strong>层级管理器</strong> 选中节点，然后将 <strong>资源管理器</strong> 中的脚本拖拽到 <strong>属性检查器</strong> 即可添加脚本组件到节点。如下所示：</p><p><img src="`+h+`" alt="audioSource"></p></li></ol><h4 id="音效播放" tabindex="-1">音效播放 <a class="header-anchor" href="#音效播放" aria-label="Permalink to &quot;音效播放&quot;">​</a></h4><p>相较于长的音乐播放，音效播放具有以下特点：</p><ul><li>播放时间短</li><li>同时播放的数量多</li></ul><p><strong>AudioSource</strong> 组件提供了 <code>playOneShot</code> 接口来播放音效。具体代码实现如下：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// AudioController.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { AudioClip, AudioSource, Component, _decorator } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AudioController&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioClip)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> clip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioClip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> audioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    playOneShot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.audioSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">playOneShot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.clip, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p><strong>注意</strong>：<code>playOneShot</code> 是一次性播放操作，播放后的音效无法暂停或停止播放，也无法监听播放结束的事件回调。</p></blockquote><p>更多音频相关的脚本接口请参考 <a href="./__APIDOC__/zh/class/AudioSource">AudioSource API</a>。</p><p>更多对音频的播放控制，可以参考文档 <a href="./audioExample">AudioSource 播放示例</a>。</p><h2 id="监听音频播放事件" tabindex="-1">监听音频播放事件 <a class="header-anchor" href="#监听音频播放事件" aria-label="Permalink to &quot;监听音频播放事件&quot;">​</a></h2><p>AudioSource 组件从 v3.3.0 开始支持了事件监听接口，具体使用范例如下：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component, Node, AudioSource } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;AudioDemo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioDemo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    audioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AudioSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onEnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Register the started event callback</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.audioSource.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource.EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">STARTED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onAudioStarted, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Register the ended event callback</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.audioSource.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource.EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ENDED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onAudioEnded, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onDisable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.audioSource.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource.EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">STARTED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onAudioStarted, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.audioSource.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AudioSource.EventType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ENDED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onAudioEnded, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onAudioStarted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // TODO...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onAudioEnded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // TODO...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="web-平台的播放限制" tabindex="-1">Web 平台的播放限制 <a class="header-anchor" href="#web-平台的播放限制" aria-label="Permalink to &quot;Web 平台的播放限制&quot;">​</a></h2><p>目前 Web 平台的音频播放需要遵守最新的 <a href="https://www.chromium.org/audio-video/autoplay" target="_blank" rel="noreferrer">Audio Play Policy</a>，即使 <strong>AudioSource</strong> 组件设置了 <code>playOnAwake</code>，也需要在第一次用户点击事件发生后，才会播放。</p>`,29),e=[k];function r(d,o,E,g,c,A){return a(),i("div",null,e)}const F=s(p,[["render",r]]);export{u as __pageData,F as default};
