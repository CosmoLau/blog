import{_ as t,v as a,b as s,R as o}from"./chunks/framework.5ffcbaff.js";import{_ as r}from"./chunks/edit.4bb8c443.js";const e="/docs/cocos/assets/add-layer.ea60167d.png",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAACESURBVEiJ7ZTBCcAgDEWT4hzm7E5/E8+O4mDZpIeCtJTaCBW0+G/G7zvkx3AIgfpo68Rd6IX+Eg0AgN3v7FYRsZtplIYMhObKegLgvS/Ho9eqWiqqmnN+ev4SIzNXKvfbi9O+VGOMRJRSMvrnjLEjuuE3nmfDooYYWzVnrxf6F2g35VzvJ1IT2SUnOxYAAAAASUVORK5CYII=",i="/docs/cocos/assets/remove-layer.2046ccd1.png",p="/docs/cocos/assets/rename-layer.5ab892a9.png",l="/docs/cocos/assets/layer-inspector.ee0afd53.png",g="/docs/cocos/assets/select.75684ef4.png",c="/docs/cocos/assets/create-empty.3d2503f2.png",d="/docs/cocos/assets/empty-state.d05c0487.png",h="/docs/cocos/assets/transit-empty-state.81be2b75.png",R=JSON.parse('{"title":"动画图层级","description":"","frontmatter":{},"headers":[],"relativePath":"zh/manual/animation/marionette/animation-graph-layer.md","filePath":"zh/manual/animation/marionette/animation-graph-layer.md"}'),m={name:"zh/manual/animation/marionette/animation-graph-layer.md"},A=o('<h1 id="动画图层级" tabindex="-1">动画图层级 <a class="header-anchor" href="#动画图层级" aria-label="Permalink to &quot;动画图层级&quot;">​</a></h1><p>动画图可以有多个层级，层级之间同时运行，其上播放的动画效果可以根据层级的配置进行混合。</p><h2 id="创建层级" tabindex="-1">创建层级 <a class="header-anchor" href="#创建层级" aria-label="Permalink to &quot;创建层级&quot;">​</a></h2><p><img src="'+e+'" alt="add-layer"></p><p>在动画图中点击 <strong>层级（Layers）</strong> 按钮，点击 <img src="'+n+'" alt="add layer"> 按钮，在弹出的输入框内输入层级的名字即可创建层级。</p><h2 id="删除层级" tabindex="-1">删除层级 <a class="header-anchor" href="#删除层级" aria-label="Permalink to &quot;删除层级&quot;">​</a></h2><p>鼠标悬停在层级上后，可以点击层级右侧的 <strong>×</strong> 进行删除，此操作仅在有多个层级时生效。</p><p><img src="'+i+'" alt="remove"></p><h2 id="重命名层级" tabindex="-1">重命名层级 <a class="header-anchor" href="#重命名层级" aria-label="Permalink to &quot;重命名层级&quot;">​</a></h2><p>在层级名字处双击鼠标左键可对层级进行重命名：</p><p><img src="'+p+'" alt="rename"></p><h2 id="层级属性" tabindex="-1">层级属性 <a class="header-anchor" href="#层级属性" aria-label="Permalink to &quot;层级属性&quot;">​</a></h2><p>在动画图层级中选中任意层级后，在 <strong>属性查看器</strong> 内可以查看层级属性。</p><p><img src="'+l+'" alt="inspector"></p><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Mask</strong></td><td style="text-align:left;">动画遮罩，用于指定对应的 <a href="./animation-mask.html">动画遮罩资源</a></td></tr><tr><td style="text-align:left;"><strong>Weight</strong></td><td style="text-align:left;">层级权重，用于指定当前层级在和 <strong>先前层级</strong> 混合时的权重，取值范围为 [0, 1]</td></tr></tbody></table><h3 id="动画遮罩" tabindex="-1">动画遮罩 <a class="header-anchor" href="#动画遮罩" aria-label="Permalink to &quot;动画遮罩&quot;">​</a></h3><p>从 <strong>资源管理器</strong> 拖拽动画遮罩到动画图窗口的 <strong>遮罩（Mask）</strong> 属性或者在层级中选中 <strong>遮罩（Mask）</strong> 属性都可以将遮罩赋予该层级。</p><p>操作步骤可参考下图，按照 1，2，3 步骤：</p><ul><li>选中任意层级</li><li>在 <strong>属性检查器</strong> 内点击下拉菜单</li><li>选中提前创建好的 <strong>遮罩</strong> 资源或从 <strong>资源管理器</strong> 拖拽到此处</li></ul><p><img src="'+g+'" alt="select"></p><p>指定后，该层级上的所有动画效果都受到该遮罩的影响。</p><p>例如，可以向层级指定一个仅保留上半身骨骼、下半身骨骼都被禁用的动画遮罩，则该层级的动画效果将仅作用于上半身。</p><h3 id="层级权重" tabindex="-1">层级权重 <a class="header-anchor" href="#层级权重" aria-label="Permalink to &quot;层级权重&quot;">​</a></h3><p>每一层级的动画效果将以一定比例与前面层级的动画效果进行混合，该混合的比例由层级的权重属性指定。</p><p>0 代表完全使用前面层级的动画效果，1 代表该层级完全覆盖前面层级的动画效果，当处于 [0,1] 时则进行适当的混合。</p><p>层级的混合仅会混合那些未被动画遮罩禁用的骨骼。例如，若层级 1 启用了某骨骼，但其后的层级 2 利用动画遮罩禁用了该骨骼，则 无论层级 2 权重指定为多少，该骨骼都仅全量播放层级 1 的动画效果。</p><p>也可以在代码中通过 <code>AnimationController.prototype.setLayerWeight</code> 动态修改层级权重。</p><h2 id="网格布局区域操作" tabindex="-1">网格布局区域操作 <a class="header-anchor" href="#网格布局区域操作" aria-label="Permalink to &quot;网格布局区域操作&quot;">​</a></h2><p>在网格内空白处点击鼠标右键可以打开层级菜单。</p><p><img src="'+r+'" alt="Edit"></p><p>菜单中可以添加 <strong>子状态、子状态机、混合以及空状态</strong>。</p><ul><li><p><strong>子状态、子状态机</strong> 和 <strong>混合</strong> 的使用方式请参考 <a href="./animation-graph-basics.html">动画状态机</a>。</p></li><li><p><strong>添加空状态</strong>：该菜单会在层级上创建一个默认名为 Empty 的空状态，请参考下文 <strong>空状态</strong> 部分获取更多信息。</p><p><img src="'+c+'" alt="create empty"></p></li><li><p><strong>返回中心视角</strong>：该菜单会将层级的视角返回到层级的中心。</p></li><li><p>按住鼠标右键或中键，可以移动层级网格；使用滚轮滚动可以对层级进行缩放。</p></li></ul><h2 id="空状态" tabindex="-1">空状态 <a class="header-anchor" href="#空状态" aria-label="Permalink to &quot;空状态&quot;">​</a></h2><p>很多情况下，一种需求是：仅在特定情况下，启用某一层级；其它情况下都使此层级不生效。</p><p>对于这种需求，可以使用 <strong>空状态</strong>。 <strong>空状态</strong> 可以看作是一种动画，它的动画效果就是前面层级的动画效果。</p><p>从 <strong>空状态</strong> 状态引出的过渡，就相当于前面层级的动画效果逐渐过渡到目标动画。此过渡上可以指定过渡条件、过渡周期。但过渡周期仅可指定为绝对的时长（以秒为单位）。</p><p><img src="'+d+'" alt="layer"></p><p>引出到 <strong>空状态</strong> 状态的过渡，就相当于源头动画的动画效果在不断衰减，直到过渡完成，相当于当前层级被禁用。</p><p>如在下图的示例中，当 <strong>Empty</strong> 仅在触发器 <strong>Trigger</strong> 被触发后才会过渡到 <strong>RunShoot</strong> 状态，而在 <strong>Empty</strong> 状态下，该层级不会影响到前面层级的动画效果。</p><p><img src="'+h+'" alt="duration"></p>',40),_=[A];function b(u,f,y,x,q,E){return a(),s("div",null,_)}const P=t(m,[["render",b]]);export{R as __pageData,P as default};
