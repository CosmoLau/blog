import{_ as s,v as a,b as e,R as o}from"./chunks/framework.5ffcbaff.js";const t="/docs/cocos/assets/build.3b6ffde5.png",n="data:image/png;base64,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",l="/docs/cocos/assets/package.87065028.png",r="/docs/cocos/assets/upload.e0f9abab.png",c="/docs/cocos/assets/push.c887bf44.png",p="/docs/cocos/assets/game.c4df385d.png",A="/docs/cocos/assets/share.4f69fdb6.png",i="/docs/cocos/assets/file.714fe618.png",F=JSON.parse('{"title":"发布游戏到 Facebook Instant Games","description":"","frontmatter":{},"headers":[],"relativePath":"zh/manual/editor/publish/publish-fb-instant-games.md","filePath":"zh/manual/editor/publish/publish-fb-instant-games.md"}'),d={name:"zh/manual/editor/publish/publish-fb-instant-games.md"},g=o('<h1 id="发布游戏到-facebook-instant-games" tabindex="-1">发布游戏到 Facebook Instant Games <a class="header-anchor" href="#发布游戏到-facebook-instant-games" aria-label="Permalink to &quot;发布游戏到 Facebook Instant Games&quot;">​</a></h1><p>Facebook Instant Games 跟微信小游戏相比，本质上的区别在于 Facebook Instant Games 运行于纯 HTML5 环境。因此它不仅可以在手机上，还可以在桌面浏览器上运行，开发和调试更加便捷。</p><p><strong>目前 Cocos Creator 为用户完成的工作包括：</strong></p><ul><li>集成了 Facebook Instant Games SDK，并且自动进行了初始化，用户能直接调用相关的 API</li><li>在 Cocos Creator 构建面板中提供一键式打包流程，可直接打包为符合 Facebook Instant Games 技术规范的游戏</li></ul><p><strong>用户需要完成的工作：</strong></p><ul><li>调用 Facebook Instant Games SDK，访问平台相关功能</li><li>将 Cocos Creator 打包好的版本上传到 Facebook</li></ul><h2 id="发布流程" tabindex="-1">发布流程 <a class="header-anchor" href="#发布流程" aria-label="Permalink to &quot;发布流程&quot;">​</a></h2><ul><li>使用 Cocos Creator 构建游戏</li><li>上传到 Facebook 后台</li><li>测试游戏</li><li>在 Facebook 中分享你的游戏</li></ul><h2 id="使用-cocos-creator-构建游戏" tabindex="-1">使用 Cocos Creator 构建游戏 <a class="header-anchor" href="#使用-cocos-creator-构建游戏" aria-label="Permalink to &quot;使用 Cocos Creator 构建游戏&quot;">​</a></h2><ol><li><p>使用 Cocos Creator 打开需要发布的项目工程，从 <strong>菜单栏 -&gt; 项目</strong> 中打开 <strong>构建发布</strong> 面板。在 <strong>构建发布</strong> 面板的 <strong>发布平台</strong> 中选择 <strong>Facebook Instant Games</strong>。</p><p><img src="'+t+'" alt="build"></p><p>通用构建选项的设置请参考 <a href="./build-options.html">通用构建选项</a>，Facebook Instant Games 特有的构建选项如下，具体说明请参考下文 <strong>构建选项</strong> 部分的内容。</p><p><img src="'+n+'" alt="fb-instant-games-options"></p></li><li><p><strong>构建发布</strong> 面板的构建选项设置完成后，点击 <strong>构建</strong>。<br> 构建完成后点击 <strong>构建任务</strong> 左下角的文件夹图标按钮打开项目发布包，可以看到在默认发布路径 <code>build</code> 目录下生成了 <code>fb-instant-games</code>（以具体的构建任务名为准）文件夹，其中已经包含了Facebook Instant Games 环境的压缩文件 <code>fb-instant-games.zip</code>。</p><p><img src="'+l+'" alt="package"></p></li></ol><h3 id="构建选项" tabindex="-1">构建选项 <a class="header-anchor" href="#构建选项" aria-label="Permalink to &quot;构建选项&quot;">​</a></h3><p>各平台通用的构建选项，详情请参考 <a href="./build-options.html">通用构建参数介绍</a>。接下来我们来看一下 Facebook Instant Games 平台特有的构建选项。</p><table><thead><tr><th style="text-align:left;">构建选项</th><th style="text-align:left;">说明</th><th style="text-align:left;">字段名（用于命令行发布）</th></tr></thead><tbody><tr><td style="text-align:left;">设备方向</td><td style="text-align:left;">可选值包括 <strong>Landscape</strong>、<strong>Portrait</strong></td><td style="text-align:left;"><code>orientation</code></td></tr><tr><td style="text-align:left;">vConsole</td><td style="text-align:left;">插入 vConsole 调试插件，vConsole 类似 DevTools 的迷你版，用于辅助调试。</td><td style="text-align:left;"><code>embedWebDebugger</code></td></tr></tbody></table><h3 id="上传到-facebook" tabindex="-1">上传到 Facebook <a class="header-anchor" href="#上传到-facebook" aria-label="Permalink to &quot;上传到 Facebook&quot;">​</a></h3><p>在 Facebook 后台创建一款新应用，在 <strong>添加商品</strong> 中添加 <strong>小游戏</strong>，设置游戏类别，保存更改。（详情可参考 <a href="https://developers.facebook.com/docs/games/instant-games/getting-started/quickstart?locale=zh_CN#app-setup" target="_blank" rel="noreferrer">设置应用</a>）</p><p>点击应用面板左侧的 <strong>小游戏 -&gt; 网页托管</strong> 选项卡，单击 <strong>上传版本</strong>，将 <code>fb-instant-games</code> 目录下的 <code>.zip</code> 文件上传到 Facebook 托管服务中。</p><p><img src="'+r+'" alt="upload"></p><p>当版本状态更改为 “待命” 时，单击 “★” 按钮将构建版本推送到 “生产” 环境。</p><p><img src="'+c+`" alt="push"></p><h3 id="三、测试游戏" tabindex="-1">三、测试游戏 <a class="header-anchor" href="#三、测试游戏" aria-label="Permalink to &quot;三、测试游戏&quot;">​</a></h3><h4 id="在本地启用支持-https-的-web-服务器" tabindex="-1">在本地启用支持 https 的 Web 服务器 <a class="header-anchor" href="#在本地启用支持-https-的-web-服务器" aria-label="Permalink to &quot;在本地启用支持 https 的 Web 服务器&quot;">​</a></h4><ul><li><p>首先打开命令行窗口，进入构建好的 <code>fb-instant-games</code> 目录，通过 npm 安装 http-server 包：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fb-instant-games</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http-server</span></span></code></pre></div></li><li><p>接着通过 openssl 创建私钥和证书：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">genrsa</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2048</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key.pem</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">req</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-x509</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-days</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-new</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key.pem</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-out</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cert.pem</span></span></code></pre></div></li><li><p>当私钥和证书准备就绪后，可通过 SSL 在本地启动 Web 服务：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c-1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">127.0</span><span style="color:#C3E88D;">.0.1</span></span></code></pre></div></li><li><p>用浏览器打开 <a href="https://localhost:8080" target="_blank" rel="noreferrer">https://localhost:8080</a>，跳过浏览器显示的安全警告，这一步仅仅是为了让浏览器把上面的私钥和证书加入白名单。如果后续重新生成了私钥和证书，则需要再次打开确认一次。目前还不能在这一步直接预览游戏，因为预览游戏需要初始化 Facebook Instant Games 的 SDK，需要通过下面的方式。</p></li></ul><h4 id="在-facebook-域名下预览游戏" tabindex="-1">在 Facebook 域名下预览游戏 <a class="header-anchor" href="#在-facebook-域名下预览游戏" aria-label="Permalink to &quot;在 Facebook 域名下预览游戏&quot;">​</a></h4><p>如果要使用 Facebook Instant Games SDK 的所有功能，需要用浏览器打开 <a href="https://www.facebook.com/embed/instantgames/YOUR_GAME_ID/player?game_url=https://localhost:8080" target="_blank" rel="noreferrer">https://www.facebook.com/embed/instantgames/YOUR_GAME_ID/player?game_url=https://localhost:8080</a>，注意要将链接中的 <code>YOUR_GAME_ID</code> 换成你在 Facebook 后台创建的应用编号。</p><p>然后可以看到游戏成功运行：</p><p><img src="`+p+'" alt="game"></p><h3 id="四、在-facebook-中分享你的游戏" tabindex="-1">四、在 Facebook 中分享你的游戏 <a class="header-anchor" href="#四、在-facebook-中分享你的游戏" aria-label="Permalink to &quot;四、在 Facebook 中分享你的游戏&quot;">​</a></h3><p>点击应用面板中的 <strong>小游戏</strong> 选项卡，选择 <strong>详情</strong>，在 <strong>详情</strong> 页面中拉到最下方可看到如下图所示部分，选择 <strong>分享游戏</strong>，即可将小游戏直接分享到 Facebook 动态消息中。</p><p><img src="'+A+'" alt="share"></p><p>详细的内容，可参考 <a href="https://developers.facebook.com/docs/games/instant-games/test-publish-share?locale=zh_CN" target="_blank" rel="noreferrer">测试、发布和分享小游戏</a>。</p><blockquote><p><strong>注意</strong>：Facebook 托管存在多项限制，其中最重要的是：</p><ol><li>不支持服务器端逻辑（例如：php）</li><li>每次应用程序上传的文件数量不超过 500 个</li></ol></blockquote><h2 id="自定义-instant-games" tabindex="-1">自定义 Instant Games <a class="header-anchor" href="#自定义-instant-games" aria-label="Permalink to &quot;自定义 Instant Games&quot;">​</a></h2><p>开发者可以根据自身需求在 Creator 项目文件夹下创建 <a href="./custom-project-build-template.html">build-templates/fb-instant-games</a> 目录，然后将发布后的这几个文件复制到该目录中，即可对它们进行定制：</p><p><img src="'+i+'" alt="file"></p><ul><li><code>fbapp-config.json</code>：这是整个包的配置，可前往 <a href="https://developers.facebook.com/docs/games/instant-games/bundle-config" target="_blank" rel="noreferrer">官方介绍</a></li><li><code>index.html</code>：这里可以修改引入的 Facebook Instant Games SDK 版本</li><li><code>index.js</code>：这里可以修改 SDK 初始化与进度条</li></ul><h2 id="sdk-说明" tabindex="-1">SDK 说明 <a class="header-anchor" href="#sdk-说明" aria-label="Permalink to &quot;SDK 说明&quot;">​</a></h2><p>Creator 已集成 Facebook 提供的 Instant Games SDK，并且在游戏加载时自动进行了初始化（<code>initializeAsync</code> 及 <code>startGameAsync</code>）。用户可直接通过 <code>FBInstant</code> 模块访问，使用说明详见 <a href="https://developers.facebook.com/docs/games/instant-games/sdk" target="_blank" rel="noreferrer">Instant Games SDK</a>。 此外，Facebook 还提供了 Facebook SDK for JavaScript，用于访问 Facebook 的社交功能，可通过 <code>FB</code> 模块访问。不过该 SDK Creator 并没有集成，需要用户手动引入，详见 <a href="https://developers.facebook.com/docs/javascript" target="_blank" rel="noreferrer">官方文档</a>。</p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><ul><li><a href="https://developers.facebook.com/" target="_blank" rel="noreferrer">Facebook 后台</a></li><li><a href="https://developers.facebook.com/docs/games/instant-games?locale=zh_CN" target="_blank" rel="noreferrer">Facebook Instant Games 文档</a></li></ul>',39),h=[g];function b(C,m,u,y,f,k){return a(),e("div",null,h)}const X=s(d,[["render",b]]);export{F as __pageData,X as default};
