import{_ as s,v as a,b as o,R as n}from"./chunks/framework.5ffcbaff.js";const F=JSON.parse('{"title":"开发注意事项","description":"","frontmatter":{},"headers":[],"relativePath":"zh/manual/scripting/readonly.md","filePath":"zh/manual/scripting/readonly.md"}'),l={name:"zh/manual/scripting/readonly.md"},e=n(`<h1 id="开发注意事项" tabindex="-1">开发注意事项 <a class="header-anchor" href="#开发注意事项" aria-label="Permalink to &quot;开发注意事项&quot;">​</a></h1><h2 id="readonly" tabindex="-1">ReadOnly <a class="header-anchor" href="#readonly" aria-label="Permalink to &quot;ReadOnly&quot;">​</a></h2><p>由于 <code>Readonly</code> 是只读属性，不建议对其进行写操作。因此直接通过 <code>Readonly</code> 属性调用接口修改值的方式，不保证在各平台都会生效。</p><p>例如，节点的世界坐标系内的位置，是 <code>Readonly</code> 的：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">en</span><span style="color:#676E95;font-style:italic;"> Position in world coordinate system</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">* </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">zh</span><span style="color:#676E95;font-style:italic;"> 世界坐标系下的坐标</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#A6ACCD;">get </span><span style="color:#82AAFF;">worldPosition</span><span style="color:#A6ACCD;">(): Readonly</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">math</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Vec3</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#A6ACCD;">set </span><span style="color:#82AAFF;">worldPosition</span><span style="color:#A6ACCD;">(val: Readonly</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">math</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Vec3</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>在原生平台，此处 <code>add</code> 的结果不保存到 <code>worldPosition</code> 上：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">worldPosition</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(xxx)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 结果不会被保存！</span></span></code></pre></div><p>为避免这种情况，可通过中间变量来传递，代码示例如下：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> ret </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">worldPosition</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(diff</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">multiplyScalar</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">speedFactor))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setWorldPosition</span><span style="color:#A6ACCD;">(ret)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>常见属性包括但不限于以下所列的属性：<code>position</code>、<code>rotation</code>、<code>scale</code>、<code>worldPosition</code>、<code>worldRotation</code>、<code>worldScale</code>、<code>eulerAngles</code> 以及 <code>worldMatrix</code>，都建议采用上述方法使用。</p>`,10),t=[e];function p(c,r,i,y,d,D){return a(),o("div",null,t)}const C=s(l,[["render",p]]);export{F as __pageData,C as default};
