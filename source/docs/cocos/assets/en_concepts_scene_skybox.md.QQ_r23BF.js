import{_ as e}from"./chunks/cubemap-properties.Wlf3SAmu.js";import{_ as t,c as o,o as n,a4 as s}from"./chunks/framework.uQk9_EO2.js";const r="/docs/cocos/assets/enable-skybox.CtiK9dI9.png",i="/docs/cocos/assets/envmap.C23fPPkF.png",a="/docs/cocos/assets/texturecube.CfNhCesN.png",l="/docs/cocos/assets/set-envmap.1J4hkaQc.png",p="/docs/cocos/assets/builtin.Dl8O1jIl.png",g="/docs/cocos/assets/skybox-camera.k0Vylvgz.png",c="/docs/cocos/assets/cubemap-texture-type.CtfCH5at.png",h="/docs/cocos/assets/create-cubemap.CTp16s0G.png",d="/docs/cocos/assets/sky-box-type.Bm0J1wXK.png",m="/docs/cocos/assets/hemisphere.DPYIMcKB.png",u="/docs/cocos/assets/autogen-hemisphere.D6Loh9ks.png",f="/docs/cocos/assets/diffuse-map-with-reflection.Bgrs-9OI.png",b="/docs/cocos/assets/compare.X9M9x5yO.gif",y="/docs/cocos/assets/use-hdr.XQO-uAwj.png",x="/docs/cocos/assets/material.DBKfmvgN.png",k="/docs/cocos/assets/custom-skybox-material.BlDqIyLD.png",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAfCAIAAAAwU+mAAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAJJSURBVFiF7Zg/i9pgHMe/ueQwJVpFQW9JFjPoEIgOneIkiOAiV1+C3NQuFu5FCHVpp8OXYMVFkEC3TDdIQCgdIpQIUiXKWXMQuRM7RO0fSiuPB2nAz/Q84ffwfJ7k+zyEh0qn0/AnZ14LkHNS9wKGZVkuHKHWj16bHMSGZu4Xd47jAGC4cIR++YpK8F5bHcRmMuI+vHecrwDOqPWjX7wBUAl+HxAfZ/2k7gU+VmcIxtTycjH0o2tb40tt+ufSpNiWGK3zuUEk93dI1AFgOSt8HAGuXKKenF4Pn9DqIEjV9wy/GalgNOx2+GY5JrjN/dp21PJykbVvukYrKbalYBAAnN4RH+TorCefi+fOpz6AeL0Ui1rjQkcvDGw7FKknf/FWVuNC12iBb0rBuakXOnpvyRZLYoV0ZtK3Hoqp5ZjbNE29AQDT6+4u8cPVXHq2r71QJBmzgrsfspwAp9cHgMYXW5EYgdDg+KwjXi/JbWV8qU2RTakCu6tYz7cNVoRthrgasMsGWyzLxV3ZRRIg2idHZx3T20VCDgQAvimwpqlX+wD4ZjmyK3A0zTAV6SrPN9zVPtg3XaN19MTHn+vxF2HaXq1+flRRIr/FoKXdmW76+/fmebCYdcsktZyqkU78BFnHcpvjnhW5EmRVgG3N9IdYNAws9gNGVZNTU2JlaFQHgbYkqwKAtT4gP2GoXC5Hv35LOtwD1u/eWJYFX/8InNS94KTuBWcbmtlMRv8u/D/YTEYbenugU5lMxq+XGY7juHcDvsPPWfdagJzvwgrTfRWl0ZAAAAAASUVORK5CYII=",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAAfCAIAAADP8cxiAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAALtSURBVFiF7ZgxaBpRHMY/ozboFXsJveAlYpRk8Ia4hB44pJRyYJfDbqaj4hIouNTJ2clJCGQRHRtHcemBUzIUDrKYQYeES4LtSYV4OaJHaqUd7qQZ2kSMIoo/HN579/7H971737tDE8MwmF0WJi1gvMztTTMWl9XmXyRNk9YxJiz+RfKNg1qyWCetZCwsmIBZ9YaZz97c3jQz4/YsQ9R4D3KU6/5AR81+rBVHpGikDGMPAOrH4l5ebzpT++4PCWcx3RiZqpExrL17NMTLNT9p0zuhxHaMMQOA3OSTEoB4ig0oaotxuADIzayyHGPMQK9SOEkK0CdwNAC0q1e76UY8xQaUq910w7gbec0nJQR9h2EHAQBaOXqaGVTbCLLnZNfNbUUDgMhWjPlZjop8tFmnqcOEU59BMNZaVOQLapumYuQ1HxXLstn/2qsb4GitHBX5ggrGfRBB5kwj1slQ/871MwnwHoQdrWORj4pl2cbt+0LjtufaYUs5/ef23zT1xY5v2iDfZgBA+lLtEf1HagwKdy30KkcSgAulp1/xkOZ2tZkBINS+ynBtevG927YTbBAIkht2rZYHIs9d0Gp5AMgcqW271TOozCdmL+g7DBPnR9LfCzRVylFGu7OoL7PxbP+Bc+UFoBidC6UHEhCUc96xvIrQS4KQr/v70MblWM5o91aCgDCIzCdmT6h99m/HwltxwciDnp/7U+IP1Td+3Lg3+h0PadYHxcu12KbXA31nAhj6cH5y9orpb5WOLZBwAsicaQRDxQHAmdpnSynvo+UXSs8oCfoCNHQ/xUq7TVMcbWxI5G/rdse7CACEEtul3NaDS3afERwtjeSJRjBrqSCQP81Wn3F6IKFmk9KjxcX0SVm2cTm2FHagemW8bATlvNNPLABIewV1aYct5dgYg0ph8JPT9OnV2/fLq0P5mgJm/KNsbm+amdubZhZ+A61f3UnLGBeWyp0CFTP7R2C9q9W7//sknHpmPXuTFjBe/gCGbRYSTRcEXgAAAABJRU5ErkJggg==",v="/docs/cocos/assets/convolution-map.UoaXVYWm.gif",B=JSON.parse('{"title":"Skybox","description":"","frontmatter":{},"headers":[],"relativePath":"en/concepts/scene/skybox.md","filePath":"en/concepts/scene/skybox.md","lastUpdated":1712305443000}'),C={name:"en/concepts/scene/skybox.md"},T=s('<h1 id="skybox" tabindex="-1">Skybox <a class="header-anchor" href="#skybox" aria-label="Permalink to &quot;Skybox&quot;">​</a></h1><p>The skybox in a video game is a cube that wraps around the entire scene and can render and display the entire scene environment very well. The Skybox can also contribute very important IBL ambient lighting the in PBR-based workflow.</p><h2 id="enabling-skybox" tabindex="-1">Enabling Skybox <a class="header-anchor" href="#enabling-skybox" aria-label="Permalink to &quot;Enabling Skybox&quot;">​</a></h2><p>Check the scene root node in the <strong>Hierarchy</strong> panel, then check the <strong>Enabled</strong> property in the <strong>Skybox</strong> component of the <strong>Inspector</strong> panel to enable the skybox.</p><p><img src="'+r+'" alt="enable skybox"></p><p>The <strong>Skybox</strong> component properties are as follows:</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Enabled</strong></td><td style="text-align:left;">Check this option to enable skybox.</td></tr><tr><td style="text-align:left;"><strong>Env Lighting Type</strong></td><td style="text-align:left;">Environment lighting type. Please refer to the <strong>Diffuse Illumination</strong> section below for more information.</td></tr><tr><td style="text-align:left;"><strong>UseHDR</strong></td><td style="text-align:left;">If this option is checked, HDR (High Dynamic Range) will be turned on, if not checked, LDR (Low Dynamic Range) will be used. For details, please refer to the section <strong>Switching HDR/LDR Mode</strong> below.</td></tr><tr><td style="text-align:left;"><strong>Envmap</strong></td><td style="text-align:left;">Environment map, TextureCube type, see below for details on how to set it. <br>When this property is empty, the skybox uses and displays pixel texture by default.</td></tr><tr><td style="text-align:left;"><strong>Reflection Convolution</strong></td><td style="text-align:left;">Click the bake button will generates a low resolution environment map and perform convolution calculation on this map, convolution map will be used for environment reflection.</td></tr><tr><td style="text-align:left;"><strong>Reflection Map</strong></td><td style="text-align:left;">Automatically generated convolutional maps for environmental reflection, currently doesn&#39;t support manually editing. Rendering effects, please refer to the section <strong>bake reflection convolution map</strong> below.</td></tr><tr><td style="text-align:left;"><strong>DiffuseMap</strong></td><td style="text-align:left;">The convolution map for advanced diffuse lighting. It&#39;s automatically generated and managed by the engine, currently doesn&#39;t support manually editing. This option is only shown when <strong>Env Lighting Type</strong> is <strong>DIFFUSEMAP_WITH_REFLECTION</strong>.</td></tr><tr><td style="text-align:left;"><strong>Reflection Convolution</strong></td><td style="text-align:left;">Please refer to the <strong>Reflection Convolution</strong> section below for detail</td></tr><tr><td style="text-align:left;"><strong>SkyboxMaterial</strong></td><td style="text-align:left;">Add custom material for the skybox. Please refer to the <strong>Skybox Material</strong> section below for detail</td></tr></tbody></table><h2 id="setting-the-environment-map-of-the-skybox" tabindex="-1">Setting the Environment Map of the Skybox <a class="header-anchor" href="#setting-the-environment-map-of-the-skybox" aria-label="Permalink to &quot;Setting the Environment Map of the Skybox&quot;">​</a></h2><p>After enabling the Skybox, it is also necessary to set the environment map, which is used to generate ambient lighting in the scene. Drag and drop the map asset into the <strong>Envmap</strong> property box of the Skybox component, or click the arrow button behind the <strong>Envmap</strong> property box to select the desired map asset. If not set, the Skybox will use and display pixel maps by default.</p><p><img src="'+i+'" alt="envmap"></p><p>The skybox supports the following environment map assets:</p><ol><li><p>A single texture of type TextureCube, which can be set in Creator.</p><ul><li><p>Cube Cross images</p></li><li><p>PNG or HDR format images</p></li></ul></li><li><p>CubeMap in the form of image files</p></li><li><p>CubeMap created manually in Creator by combining six texture maps</p></li></ol><h3 id="by-setting-the-texture-assets-of-texturecube-type" tabindex="-1">By Setting the Texture Assets of TextureCube Type <a class="header-anchor" href="#by-setting-the-texture-assets-of-texturecube-type" aria-label="Permalink to &quot;By Setting the Texture Assets of TextureCube Type&quot;">​</a></h3><ol><li><p>To import a texture asset, drag and drop it directly into the <strong>Assets</strong> panel.</p></li><li><p>Select the imported texture asset, set the <strong>Type</strong> property to <strong>texture cube</strong> in the <strong>Inspector</strong> panel on the right, then click the green checkbox in the upper right corner to save the settings.</p><p><img src="'+a+'" alt="Set to TextureCube"></p></li><li><p>Check <strong>Scene</strong> in the <strong>Hierarchy</strong> panel, then drag the set texture asset to the <strong>Envmap</strong> property box of the <strong>Skybox</strong> component in the <strong>Inspector</strong> panel.</p><p><img src="'+l+'" alt="Set environment map for skybox"></p></li></ol><p>The setup is done. The developer can directly see the set environment map of the skybox in the <strong>Scene</strong> panel. If the map is not displayed correctly, check if the value of <strong>SkyIllum parameter</strong> is too low, or <strong>modify the Clear Flag</strong> of Camera.</p><h3 id="use-engine-builtin-resources" tabindex="-1">Use engine builtin resources <a class="header-anchor" href="#use-engine-builtin-resources" aria-label="Permalink to &quot;Use engine builtin resources&quot;">​</a></h3><p>In the internal database of the Assets Manager Panel, the engine provides some builtin TextureCube resources that developers can use on demand following the same instructions described above.</p><p><img src="'+p+'" alt="builtin skybox"></p><h4 id="skyillum-property" tabindex="-1">SkyIllum Property <a class="header-anchor" href="#skyillum-property" aria-label="Permalink to &quot;SkyIllum Property&quot;">​</a></h4><p>The SkyIllum property can be found in the <strong>Ambient</strong> component of the <strong>Inspector</strong> panel by selecting the scene root node in the <strong>Hierarchy</strong> panel, with a default value of 20000.</p><p>If the SkyIllum property is set <strong>too low</strong>, the environment map of the skybox may not be displayed correctly in the <strong>Scene</strong> panel. General:</p><ul><li><p>When the SkyIllum property value is less than 300, the environment map of the Skybox will not be displayed properly.</p></li><li><p>When the SkyIllum property is 5000, the effect is equivalent to the light intensity of a moonlit night.</p></li></ul><h4 id="modifying-clearflags-of-camera" tabindex="-1">Modifying ClearFlags of Camera <a class="header-anchor" href="#modifying-clearflags-of-camera" aria-label="Permalink to &quot;Modifying ClearFlags of Camera&quot;">​</a></h4><p>If the environment map of the skybox is already displayed correctly in the <strong>Scene</strong> panel but still does not take effect after the project is run, you need to change the <strong>ClearFlags</strong> of the <strong>Camera</strong> component to <strong>SKYBOX</strong>:</p><p><img src="'+g+'" alt="skybox-camera"></p><h3 id="by-setting-the-cubemap" tabindex="-1">By Setting the CubeMap <a class="header-anchor" href="#by-setting-the-cubemap" aria-label="Permalink to &quot;By Setting the CubeMap&quot;">​</a></h3><p>A cube map can be generated manually in Creator from six normal maps by following the steps below:</p><ol><li><p>Select all the six prepared texture assets in the <strong>Assets</strong> panel, and then set the <strong>Type</strong> property of these texture assets to <strong>texture</strong> in the <strong>Inspector</strong> panel, and click the green checkbox in the upper right corner.</p><p><img src="'+c+'" alt="cubeMap-texture-type"></p></li><li><p>Create a new CubeMap asset. Select the folder where you want to store CubeMap in the <strong>Assets</strong> panel, click the <strong>+</strong> button in the upper left corner, and then select <strong>CubeMap</strong>. Or you can right-click the folder where you want to store the CubeMap, and select <strong>New -&gt; CubeMap</strong>.</p><p><img src="'+h+'" alt="create CubeMap"></p></li><li><p>Drag and drop the six images you just set as texture type into the corresponding property box of the CubeMap, and click the green tick button on the top right then you are done.</p><p><img src="'+e+'" alt="Set CubeMap"></p><blockquote><p><strong>Notes</strong>:</p><ol><li>The property boxes in CubeMap that do not have a texture asset yet will be populated using the default asset.</li><li>The six property boxes in CubeMap <strong>do not use the same texture</strong>, otherwise they will not be displayed properly for some platforms.</li></ol></blockquote></li></ol><h2 id="diffuse-illumination" tabindex="-1">Diffuse Illumination <a class="header-anchor" href="#diffuse-illumination" aria-label="Permalink to &quot;Diffuse Illumination&quot;">​</a></h2><p>Creator supports the following three types of ambient diffuse lighting, which can be select in the pull-down menu of <strong>Env Lighting Type</strong>.</p><p><img src="'+d+'" alt="type"></p><p>The types are described as follows:</p><ol><li><p><strong>Hemisphere Diffuse</strong>: when the <strong>Env Lighting Type</strong> options is <strong>HEMISPHERE_DIFFUSE</strong>, hemispheric light diffusion will be used. This method is controlled by the <strong>SkyLightingColor</strong> and <strong>GroundLightingColor</strong> properties in the <strong>Ambient</strong> component, and has higher rendering performance, but less detail and poor lighting directionality. <strong>The properties are manually adjustable, but may become inconsistent with the environment map</strong>.</p><p><img src="'+m+'" alt="ambient-diffuse"></p></li><li><p><strong>Hemisphere Diffuse And Environment Reflection</strong>: when the <strong>Env Lighting Type</strong> options is <strong>AUTOGEN_HEMISPHERE_DIFFUSE_WITH_REFLECTION</strong>, diffuse reflection is controlled by the <strong>SkyLightingColor</strong> and <strong>GroundLightingColor</strong> properties in the <strong>Ambient</strong> component. It also reflects the specular reflection generated by the environment map.</p><p><img src="'+u+'" alt="autogen-hemisphere"></p></li><li><p><strong>Diffuse Convolution Map And Environment Reflection</strong>: when the <strong>Env Lighting Type</strong> options is <strong>DIFFUSEMAP_WITH_REFLECTION</strong>, the convolution map diffuse will be used. This method is advanced diffuse reflection, which can correctly express the diffuse lighting generated by environment map, with better lighting directionality and details. However, the convolution map in the <strong>DiffuseMap</strong> property is automatically generated for diffuse reflection and does not allow manual editing.</p><p><img src="'+f+'" alt="apply-diffuseMap"></p></li></ol><p>The comparison between the <strong>AUTOGEN_HEMISPHERE_DIFFUSE_WITH_REFLECTION</strong> and <strong>DIFFUSEMAP_WITH_REFLECTION</strong> is more obvious from the GIF below，when the <strong>Env Lighting Type</strong> is <strong>DIFFUSEMAP_WITH_REFLECTION</strong> The backlight is dark, highlighting the overall sense of layering, light and shade contrast details are also greatly improved.</p><p><img src="'+b+'" alt="Compare"></p><blockquote><p><strong>NOTICE</strong>: When replacing the environment map in the <strong>Envmap</strong> property, Creator will automatically calculate the corresponding ambient lighting information, as well as the diffuse lighting (only CubeMap in the form of image files is supported, manually created CubeMap is not supported).</p></blockquote><h2 id="toggling-hdr-ldr-mode" tabindex="-1">Toggling HDR/LDR mode <a class="header-anchor" href="#toggling-hdr-ldr-mode" aria-label="Permalink to &quot;Toggling HDR/LDR mode&quot;">​</a></h2><p>The <strong>UseHDR</strong> option in the Skybox component is used to toggle the HDR/LDR mode, which is used when checked.</p><p><img src="'+y+'" alt="use-hdr"></p><ul><li><p>HDR (High Dynamic Range): High dynamic range, with <strong>photometric intensity of the lights</strong> and <strong>exposure parameters of the camera</strong> to achieve a more realistic level of contrast between light and dark. If this mode is used, the intensity of all lights (including parallel light, point light, spot light, etc.) <strong>will become photometric physical units</strong> and ambient light cube map should use <strong>HDR format images</strong> to provide a high dynamic range data source.</p></li><li><p>LDR (Low Dynamic Range): Low dynamic range. If this mode is used, the <strong>lights intensity becomes unitless</strong> and no longer has any connection to photometry or camera exposure. This mode is suitable for scenarios where you want the original map color to be reflected without any color tinting. Ambient light cube map can be done using images in formats such as <strong>PNG</strong>.</p></li></ul><h2 id="skybox-material" tabindex="-1">Skybox Material <a class="header-anchor" href="#skybox-material" aria-label="Permalink to &quot;Skybox Material&quot;">​</a></h2><p><img src="'+x+'" alt="material"></p><p>The default shader used for the skybox material is <strong>Assets -&gt; internal/pipeline/skybox.effect</strong>, if you want to customize the material, you can refer to <a href="./.../.../asset/material">New Material</a> to create a new material and select <a href="./.../.../.../shader/write-effect-overview">Custom Shader</a>.</p><p><img src="'+k+'" alt="cusom skybox material"></p><h2 id="reflective-convolution" tabindex="-1">Reflective Convolution <a class="header-anchor" href="#reflective-convolution" aria-label="Permalink to &quot;Reflective Convolution&quot;">​</a></h2><p>Use GGX BRDF lighting model to generate a pre-filtered reflection result for the environment map, which will take into consideration the effect of roughness and store the final result in Mipmap in order of roughness (roughness from 0 to 1, with Mipmap level 0 for roughness 0).</p><p>Since this algorithm takes into consideration the effect of roughness on the environment reflection (i.e., as roughness increases, the environment reflection becomes more blurred), it results in more realistic reflections for the PBR material.</p><h2 id="bake-reflection-convolution-map" tabindex="-1">Bake Reflection Convolution Map <a class="header-anchor" href="#bake-reflection-convolution-map" aria-label="Permalink to &quot;Bake Reflection Convolution Map&quot;">​</a></h2><p>Click the <img src="'+A+'" alt="bake"> button in the <strong>Inspector</strong> panel to bake the reflection convolution results. After the bake is complete, you can also choose to click the <img src="'+w+'" alt="remove"> to delete it.</p><p>The generated environment reflection convolution map will fill to the mipmaps for TextureCube, Sampling mipmap in the shader based on material roughness, thus providing a more realistic IBL effect, You can clearly see the comparison effect by the following GIF image.</p><p><img src="'+v+'" alt="Compare"></p>',51),I=[T];function S(R,E,_,H,M,D){return n(),o("div",null,I)}const q=t(C,[["render",S]]);export{B as __pageData,q as default};
