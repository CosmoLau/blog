import{_ as A,v as a,b as t,R as e}from"./chunks/framework.5ffcbaff.js";const n="data:image/png;base64,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",s="/docs/cocos/assets/sort.52129141.png",w=JSON.parse('{"title":"渲染排序说明","description":"","frontmatter":{},"headers":[],"relativePath":"zh/manual/ui-system/components/engine/priority.md","filePath":"zh/manual/ui-system/components/engine/priority.md"}'),o={name:"zh/manual/ui-system/components/engine/priority.md"},r=e('<h1 id="渲染排序说明" tabindex="-1">渲染排序说明 <a class="header-anchor" href="#渲染排序说明" aria-label="Permalink to &quot;渲染排序说明&quot;">​</a></h1><h2 id="_2d-渲染节点排序" tabindex="-1">2D 渲染节点排序 <a class="header-anchor" href="#_2d-渲染节点排序" aria-label="Permalink to &quot;2D 渲染节点排序&quot;">​</a></h2><p>2D 渲染节点可分为在 Canvas 下的节点和不在 Canvas 下的节点两种：</p><ul><li><p>在 Canvas 下的节点可参考下文 <strong>UI 节点排序</strong> 部分的内容。</p></li><li><p>不在 Canvas 下的节点，用户可选择通过 <a href="./ui-material.html">自定义材质</a> 来开启深度检测实现和 3D 物体的遮挡显示，开启后会按照物体的 Z 轴坐标进行遮挡渲染（可参考范例 <strong>2d-rendering-in-3d</strong>（<a href="https://github.com/cocos/cocos-test-projects/tree/v3.7/assets/cases/2D" target="_blank" rel="noreferrer">GitHub</a> | <a href="https://gitee.com/mirrors_cocos-creator/test-cases-3d/tree/v3.7/assets/cases/2d-rendering-in-3d" target="_blank" rel="noreferrer">Gitee</a>）。</p></li></ul><h2 id="ui-节点排序" tabindex="-1">UI 节点排序 <a class="header-anchor" href="#ui-节点排序" aria-label="Permalink to &quot;UI 节点排序&quot;">​</a></h2><p>UI 节点特指在 Canvas 节点下的 UI 节点，节点的混合是严格按照节点树进行排序的。UI 的渲染排序采用的是一个深度优先的排序方式，节点树的排序方式即为最终渲染数据提交的顺序。所以用户可以通过设置节点的 siblingIndex 来改变节点在父节点下的顺序，从而改变渲染顺序。</p><p>举个例子：</p><p><img src="'+n+'" alt="priority.png"></p><p>上图中整体的渲染顺序则是：<strong>A -&gt; a1 -&gt; a2 -&gt; B -&gt; b1 -&gt; C</strong>，在屏幕上的呈现状态为：<strong>C -&gt; b1 -&gt; B -&gt; a2 -&gt; a1 -&gt; A</strong> 即 <strong>从上往下</strong>。</p><p>setSiblingIndex 的使用说明：此操作是用于变更当前节点在父节点 children 数组中的位置，如果通过脚本在运行时设置，则变更过后的节点树数据不会被序列化。传入的参数如果大于 children 数组的长度，则会设置到数组最后，如果在范围内，则会插入到对应的位置上。所以此操作和节点树的状态实时相关，用户需要知道节点树当前的状态并进行操作才能得到预期的效果。</p><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><p>排序是一个很简单的功能，但是最终的呈现却是根据不同平台提供的渲染能力来的。因此，在这里说明一下，如果遇到了 UI 渲染出错，花屏，闪屏等现象，首先要检查的就是场景里所有相机（Camera 和 Canvas）的 <strong>ClearFlag</strong>，确保 <strong>场景里必须有一个相机要执行 Solid_Color 清屏操作</strong>。</p><p>具体如何设置 <strong>ClearFlag</strong>，可参考以下几种情况：</p><ul><li><p>如果场景中只有一个 UI Canvas 或者 3D Camera，那么 <strong>ClearFlag</strong> 属性设置为 <code>Solid_Color</code>。</p></li><li><p>如果场景中包含 2D 背景层、3D 场景层、 2D UI 层，则：</p><ul><li>2D 背景层：<strong>ClearFlag</strong> 属性设置为 <code>Solid_Color</code>。</li><li>3D 场景层：<strong>ClearFlag</strong> 属性设置为 <code>Depth_Only</code>。</li><li>2D UI 层：若有模型，<strong>ClearFlag</strong> 属性设置为 <code>Depth_Only</code> 以避免出现模型闪屏或者穿透的情况。若没有模型，<strong>ClearFlag</strong> 属性可设置为 <code>Dont_Clear</code> 或 <code>Depth_Only</code>。</li></ul><p><img src="'+s+'" alt="sort"></p></li></ul>',14),g=[r];function i(l,c,h,d,C,p){return a(),t("div",null,g)}const b=A(o,[["render",i]]);export{w as __pageData,b as default};
