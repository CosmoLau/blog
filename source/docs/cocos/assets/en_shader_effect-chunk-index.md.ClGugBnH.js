import{_ as e,c as t,o as n,a4 as a}from"./chunks/framework.uQk9_EO2.js";const s="/docs/cocos/assets/create-chunk.BhGR3gzo.png",i="/docs/cocos/assets/new-chunk.CEJ0VyQP.png",m=JSON.parse('{"title":"Effect Chunk","description":"","frontmatter":{},"headers":[],"relativePath":"en/shader/effect-chunk-index.md","filePath":"en/shader/effect-chunk-index.md","lastUpdated":1712305443000}'),c={name:"en/shader/effect-chunk-index.md"},l=a('<h1 id="effect-chunk" tabindex="-1">Effect Chunk <a class="header-anchor" href="#effect-chunk" aria-label="Permalink to &quot;Effect Chunk&quot;">​</a></h1><p>Chunk is a cross-file code reference mechanism that enables shader code fragments to be reused between different files.</p><p>The syntax of the chunk is based on <strong>GLSL 300 ES</strong> and will be precompiled when the asset is loaded to generate the target machine shader code.</p><h2 id="create-chunk" tabindex="-1">Create chunk <a class="header-anchor" href="#create-chunk" aria-label="Permalink to &quot;Create chunk&quot;">​</a></h2><p>Right-click in the <strong>Assets</strong> panel and select <strong>Create -&gt; Chunk</strong>:</p><p><img src="'+s+'" alt="create chunk"></p><p>A chunk asset named <strong>chunk</strong> by default can be created, as shown below:</p><p><img src="'+i+`" alt="chunk template"></p><h2 id="include-mechanism" tabindex="-1">Include mechanism <a class="header-anchor" href="#include-mechanism" aria-label="Permalink to &quot;Include mechanism&quot;">​</a></h2><p>Based on the standard GLSL syntax, Cocos Effect introduces a C-style syntax extension - the Include mechanism.</p><p>Through the include mechanism, other chunks can be included in any Shader code (CCProgram block or separate header file), as follows:</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Introduced in-engine chunk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;builtin/uniforms/cc-global&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Introduce custom chunk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../headers/my-shading-algorithm.chunk&quot;</span></span></code></pre></div><p>Relevant rules and precautions:</p><ul><li><p>Chunk extension defaults to <code>.chunk</code>, which can be ignored when include. There is no difference between using double brackets or angle brackets when introducing other code fragments, for example:</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;filename.chunk&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;filename&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ignorable extension</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;filename.chunk&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;filename&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ignorable extension</span></span></code></pre></div></li><li><p>Chunks are expanded when Cocos Effect is compiled, and only once. So don&#39;t worry when writing, each module can contain its own dependent shader fragments, even if there are repetitions;</p></li><li><p>All function declarations that do not participate in the actual calculation process at runtime will be eliminated at compile time, so you can safely include various tool functions without worrying that the generated object code will be redundant;</p></li><li><p>Chunk references can specify a relative path based on the current file directory (hereinafter collectively referred to as &quot;relative path&quot;), or a relative path based on the <strong>internal -&gt; chunks</strong> directory in the <strong>Explorer</strong> panel of the editor (Hereinafter collectively referred to as the &quot;Project Absolute Path&quot;). If there are files with the same name in the two directories, the latter (project absolute path) takes precedence;</p></li><li><p>Creator provides some built-in shader fragment resources, mainly including some commonly used utility functions and standard lighting models, etc. The built-in asset database (DB for short) located in the <a href="./../editor/assets/">Assets</a> panel in the <code>chunks</code> directory of <code>internal</code>, so it can be directly referenced without a directory.</p></li><li><p>Chunk that reference other DBs (Databases) in the editor can only specify the absolute path of the project. When multiple DBs have the same file in this path, the DB priority is: User Project DB &gt; Plugin DB &gt; Internal DB;</p></li><li><p>All CCProgram code blocks declared in the same Cocos Effect file can reference each other.</p></li></ul>`,14),o=[l];function r(h,d,p,u,k,f){return n(),t("div",null,o)}const b=e(c,[["render",r]]);export{m as __pageData,b as default};
