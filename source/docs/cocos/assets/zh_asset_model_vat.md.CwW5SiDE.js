import{_ as a,c as o,o as t,a4 as e}from"./chunks/framework.uQk9_EO2.js";const m=JSON.parse('{"title":"顶点动画贴图 （VAT）","description":"","frontmatter":{},"headers":[],"relativePath":"zh/asset/model/vat.md","filePath":"zh/asset/model/vat.md","lastUpdated":1712305443000}'),i={name:"zh/asset/model/vat.md"},n=e(`<h1 id="顶点动画贴图-vat" tabindex="-1">顶点动画贴图 （VAT） <a class="header-anchor" href="#顶点动画贴图-vat" aria-label="Permalink to &quot;顶点动画贴图 （VAT）&quot;">​</a></h1><p>顶点动画贴图（Vertex Animation Texture，VAT）通常用于表达刚体破碎、布料、流体等物理模拟动画。在 Houdini 等 PCG 软件中计算好的物理模拟动画可烘焙为 VAT 数据导出，并在实时渲染引擎中回放，以极低的性能消耗来重现复杂的物理效果。</p><p>目前支持的 VAT 数据格式为 Houdini 导出的刚体、柔体和流体数据，以及泽森科工 Zeno 的流体数据。</p><h2 id="数据导出与使用" tabindex="-1">数据导出与使用 <a class="header-anchor" href="#数据导出与使用" aria-label="Permalink to &quot;数据导出与使用&quot;">​</a></h2><p>导出的 VAT 数据包含 fbx 模型、动画贴图、包含 VAT 材质属性的 json 文件（帧数量和包围盒最大最小值等）三部分。</p><h3 id="刚体" tabindex="-1">刚体 <a class="header-anchor" href="#刚体" aria-label="Permalink to &quot;刚体&quot;">​</a></h3><p>1、导出：Houdini 设置好刚体碰撞、破碎等动画后，选择 <strong>VAT2.0 版本，UE 模式，无 paddle，LDR方式</strong> 导出。</p><p>2、材质：在 Cocos Creator 中创建一个材质，Effect 选择 <strong>util/dcc/vat/houdini-rigidbody-v2</strong>。</p><p>3、参数：查看导出的 json 文件，将 Animation Speed、NumOfFrames、PivotMin/Max、PosMin/Max 等数据填到材质中。</p><p>4、贴图：展开导出的 Position 形状贴图，将本体拖入PositionMap，下属的 Sign 和 Alpha 分别拖入 PosSignMap 和 PosAlphaMap（若有）。 Rotation 法线贴图同理。</p><h3 id="柔体" tabindex="-1">柔体 <a class="header-anchor" href="#柔体" aria-label="Permalink to &quot;柔体&quot;">​</a></h3><p>1、导出：Houdini 设置好柔体碰撞、破碎等动画后，选择 <strong>VAT3.0 版本，Unity 模式，无 paddle，LDR方式</strong>导出。</p><p>2、材质：在 Cocos Creator 中创建一个材质，Effect 选择 <strong>util/dcc/vat/houdini-softbody-v3</strong>。</p><p>3、参数：查看导出的 json 文件，将 Animation Speed、NumOfFrames 等数据填到材质中。</p><p>4、贴图：展开导出的 Position 形状贴图，将本体拖入 PositionMap，下属的 Sign 和 Alpha 分别拖入 PosSignMap 和 PosAlphaMap（若有）。 Rotation 法线贴图同理。</p><h3 id="流体-houdini" tabindex="-1">流体（Houdini） <a class="header-anchor" href="#流体-houdini" aria-label="Permalink to &quot;流体（Houdini）&quot;">​</a></h3><p>1、导出：Houdini 设置好流体动画后，选择 <strong>VAT3.0 版本，Unity 模式，无 paddle，LDR方式</strong>导出。</p><p>2、材质：在 Cocos Creator 中创建一个材质，Effect 选择 <strong>util/dcc/vat/houdini-fluid-v3-liquid</strong>。</p><p>3、参数：查看导出的 json 文件，将 Animation Speed、NumOfFrames 等数据填到材质中。</p><pre><code>- 勾选 Use Lookup Texture，将导出的 lookup 图拖入 LookupMap
- 勾选 Use Lookup Auto Frame，将导出的 lookup 图的分辨率填入 LUTTextureWidth/Height
- 选中导出的 fbx 模型，将其顶点数记录下来填入 FBXVertexCount
</code></pre><p>4、贴图：展开导出的 Position 形状贴图，将本体拖入PositionMap，下属的 Sign 和 Alpha 分别拖入 PosSignMap 和 PosAlphaMap（若有）。 Rotation 法线贴图同理。</p><h3 id="流体-zeno" tabindex="-1">流体（Zeno） <a class="header-anchor" href="#流体-zeno" aria-label="Permalink to &quot;流体（Zeno）&quot;">​</a></h3><p>1、导出：Zeno 设置好流体动画后，选择 <strong>VAT模式</strong> 导出。</p><p>2、材质：在 Cocos Creator 中创建一个材质，Effect 选择 <strong>util/dcc/vat/zeno-fluid-liquid</strong>。</p><p>3、参数：查看导出的 json 文件，将 Animation Speed、NumOfFrames 等数据填到材质中。</p><p>4、贴图：展开导出的 Position 形状贴图拖入 PositionMap，Rotation 法线贴图拖入 RotationMap。</p><h2 id="错误效果调试" tabindex="-1">错误效果调试 <a class="header-anchor" href="#错误效果调试" aria-label="Permalink to &quot;错误效果调试&quot;">​</a></h2><h3 id="刚体-1" tabindex="-1">刚体 <a class="header-anchor" href="#刚体-1" aria-label="Permalink to &quot;刚体&quot;">​</a></h3><p>若出现碎块绕圈转等动画异常，请确认导出选项是否指定的 VAT2.0 UE 模式，若选错为 Unity 模式可能导致此情况发生。</p><h3 id="流体" tabindex="-1">流体 <a class="header-anchor" href="#流体" aria-label="Permalink to &quot;流体&quot;">​</a></h3><p>若出现面破碎甚至有些面错乱，请检查 NumOfFrames 是否与 DCC 软件中的一致</p><p>若整个流体在抖或有穿插的乱面，请确认两张贴图的过滤模式为 Nearest，且一定不能勾选消除透明伪影（fix alpha transparency artifacts）</p>`,32),r=[n];function s(p,d,l,h,u,c){return t(),o("div",null,r)}const P=a(i,[["render",s]]);export{m as __pageData,P as default};
