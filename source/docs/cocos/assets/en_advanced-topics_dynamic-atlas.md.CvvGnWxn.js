import{_ as a,c as e,o as t,a4 as s}from"./chunks/framework.uQk9_EO2.js";const g=JSON.parse('{"title":"Dynamic Atlas","description":"","frontmatter":{},"headers":[],"relativePath":"en/advanced-topics/dynamic-atlas.md","filePath":"en/advanced-topics/dynamic-atlas.md","lastUpdated":1712305443000}'),i={name:"en/advanced-topics/dynamic-atlas.md"},n=s(`<h1 id="dynamic-atlas" tabindex="-1">Dynamic Atlas <a class="header-anchor" href="#dynamic-atlas" aria-label="Permalink to &quot;Dynamic Atlas&quot;">​</a></h1><p>Reducing the number of DrawCalls is a very direct and effective way to improve game rendering efficiency. One of the most important factors for two DrawCalls to be merged into one is whether both DrawCalls use the same texture.</p><p>Cocos Creator provides <strong>Dynamic Atlas</strong>, which dynamically merges the textures into one large texture at project runtime. When a map is rendered, the Dynamic Atlas system automatically detects if the map has been merged into an atlas (collection of images). If not, the system merges the texture into the atlas if it meets the conditions for dynamic atlas.</p><p>Dynamic atlas selects which textures are merged into a larger image in <strong>rendering order</strong>, which ensures that adjacent DrawCalls are merged into a single DrawCall (aka &quot;batching&quot;).</p><h2 id="enable-and-disable-dynamic-atlas" tabindex="-1">Enable and Disable Dynamic Atlas <a class="header-anchor" href="#enable-and-disable-dynamic-atlas" aria-label="Permalink to &quot;Enable and Disable Dynamic Atlas&quot;">​</a></h2><p>During initialization, Cocos Creator sets different <a href="./__APIDOC__/en/interface/Macro?id=CLEANUP_IMAGE_CACHE">CLEANUP_IMAGE_CACHE</a> parameter for different platforms, and when <code>CLEANUP_IMAGE_CACHE</code> is disabled, dynamic atlas will be enabled by default. <br> Enabling dynamic atlas will take up extra memory, and the size of the memory used varies by platform. It is currently disabled by default on mini games and native platforms, but it is recommended to turn it on if your project still has room in memory.</p><p><strong>If you want to force dynamic atlas to be enabled</strong>, please add the following code to your code:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">macro.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CLEANUP_IMAGE_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dynamicAtlasManager.enabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><blockquote><p><strong>Note</strong>: write the code above in the outermost part of the project script, not in the <code>onLoad</code>/<code>start</code> class functions, to ensure that they take effect instantly during the project loading process. Otherwise, it may cause an error if the dynamic atlas is enabled only when part of the texture cache has been released.</p></blockquote><p><strong>To forcibly disable dynamic atlas</strong>, control it directly by code:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dynamicAtlasManager.enabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="texture-restrictions" tabindex="-1">Texture Restrictions <a class="header-anchor" href="#texture-restrictions" aria-label="Permalink to &quot;Texture Restrictions&quot;">​</a></h2><p>The dynamic atlas system limits the size of the texture that can be merged. By default, only textures with a width and height less than <strong>512</strong> can be entered into the dynamic atlas system. This limit can be modified by the developer as required with the following code.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dynamicAtlasManager.maxFrameSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 512</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>For details, look up <code>DynamicAtlasManager</code> in the <a href="./__APIDOC__/en/">API documentation</a>.</p>`,15),l=[n];function o(r,d,c,h,p,m){return t(),e("div",null,l)}const k=a(i,[["render",o]]);export{g as __pageData,k as default};
