import{_ as e,c as i,o as s,a4 as a}from"./chunks/framework.uQk9_EO2.js";const E=JSON.parse('{"title":"Common Node and Component Interfaces","description":"","frontmatter":{},"headers":[],"relativePath":"en/scripting/basic-node-api.md","filePath":"en/scripting/basic-node-api.md","lastUpdated":1712305443000}'),t={name:"en/scripting/basic-node-api.md"},n=a(`<h1 id="common-node-and-component-interfaces" tabindex="-1">Common Node and Component Interfaces <a class="header-anchor" href="#common-node-and-component-interfaces" aria-label="Permalink to &quot;Common Node and Component Interfaces&quot;">​</a></h1><p>After obtaining a <strong>Node</strong> or <strong>Component</strong> instance through the method introduced in the <a href="./access-node-component">Access Node and Component</a> documentation, there are common interfaces that can be used to achieve the various effects needed through the node and component instance and it&#39;s operation.</p><p>Please review the <a href="./__APIDOC__/en/class/Node">Node</a> and the <a href="./__APIDOC__/en/class/Component">Component</a> API documentation.</p><h2 id="node-status-and-level-operations" tabindex="-1">Node Status and Level Operations <a class="header-anchor" href="#node-status-and-level-operations" aria-label="Permalink to &quot;Node Status and Level Operations&quot;">​</a></h2><p>Suppose you are inside a running component script, to access a node inside the current script use <code>this.node</code>.</p><h3 id="activating-and-deactivating-a-node" tabindex="-1">Activating and Deactivating a Node <a class="header-anchor" href="#activating-and-deactivating-a-node" aria-label="Permalink to &quot;Activating and Deactivating a Node&quot;">​</a></h3><p>A node is activated by default. It&#39;s activation state can be changed in code by setting the node&#39;s <code>active</code> property. Example:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Setting the <code>active</code> property and switching the active and closed states of the node in the editor have the same effect. When a node is down, all its components will be disabled. At the same time, all its child nodes and components on the child nodes will also be disabled. It should be noted that when child nodes are disabled, their <code>active</code> properties are not changed, so they will return to their original state when the parent node is reactivated.</p><p>In other words, <code>active</code> actually represents the active state of the node <strong>itself</strong>, and whether this node <strong>current</strong> can be activated depends on its parent node. And if it is not in the current scene, it cannot be activated. We can use the read-only property <code>activeInHierarchy</code> on the node to determine whether it is currently activated. Example:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>If the node is in the <strong>can be activated</strong> state, modifying <code>active</code> to <code>true</code> will immediately trigger the following activation operations:</p><ul><li><p>Reactivate the node and all child nodes under the node whose active is true in the scene</p></li><li><p>All components on this node and all child nodes will be enabled, and the update method in them will be executed every frame afterwards</p></li><li><p>If there are <code>onEnable</code> methods on these components, these methods will be executed</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li></ul><p>If the node is already activated, changing <code>active</code> to <code>false</code> will immediately trigger the following shutdown operations:</p><ul><li>Hide the node and all child nodes under the node in the scene</li><li>All components on this node and all child nodes will be disabled, that is, the code in <code>update</code> in these components will no longer be executed</li><li>If there are <code>onDisable</code> methods on these components, these methods will be executed</li></ul><h3 id="change-the-parent-node-of-a-node" tabindex="-1">Change the Parent Node of a Node <a class="header-anchor" href="#change-the-parent-node-of-a-node" aria-label="Permalink to &quot;Change the Parent Node of a Node&quot;">​</a></h3><p>Suppose the parent node is <code>parentNode</code> and the child node is <code>this.node</code>.</p><p>This is valid:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// method 1</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parentNode;</span></span></code></pre></div><p>This is also valid:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// method 2</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeFromParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parentNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node);</span></span></code></pre></div><p>These two methods are equivalent.</p><blockquote><p><strong>Notes</strong>:</p><ol><li>The <code>removeFromParent</code> usually needs to pass a <code>false</code>, otherwise it will empty the bound events and actions, etc. on the node by default in versions prior to v3.0.</li><li>After creating a new node through the method introduced in the <a href="./create-destroy">Create and Destroy Node</a> documentation, it is a <strong>must</strong> to set a parent node for the node to correctly initialize the node.</li></ol></blockquote><h3 id="child-nodes-of-the-parent-node" tabindex="-1">Child Nodes of the Parent Node <a class="header-anchor" href="#child-nodes-of-the-parent-node" aria-label="Permalink to &quot;Child Nodes of the Parent Node&quot;">​</a></h3><p><code>this.node.children</code> will return an array of all child nodes of the node.</p><p><code>this.node.children.length</code> will return the number of children of the node.</p><blockquote><p><strong>Note</strong>: the above two APIs will only return the direct child nodes of the node, not the child nodes of the child node.</p></blockquote><h2 id="changing-node-transformations-position-rotation-scaling" tabindex="-1">Changing Node Transformations (position, rotation, scaling) <a class="header-anchor" href="#changing-node-transformations-position-rotation-scaling" aria-label="Permalink to &quot;Changing Node Transformations (position, rotation, scaling)&quot;">​</a></h2><h3 id="changing-node-location" tabindex="-1">Changing Node Location <a class="header-anchor" href="#changing-node-location" aria-label="Permalink to &quot;Changing Node Location&quot;">​</a></h3><p>There are two ways:</p><ol><li><p>Use the <code>setPosition</code> method:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Or</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div></li><li><p>Setting the <code>position</code> variable:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.position </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ol><p>The above two usages are equivalent.</p><h3 id="changing-node-rotation" tabindex="-1">Changing Node Rotation <a class="header-anchor" href="#changing-node-rotation" aria-label="Permalink to &quot;Changing Node Rotation&quot;">​</a></h3><p>Example:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRotation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(quaternion);</span></span></code></pre></div><p>Or set local rotation by <strong>Euler angle</strong>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRotationFromEuler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="changing-node-scale" tabindex="-1">Changing Node Scale <a class="header-anchor" href="#changing-node-scale" aria-label="Permalink to &quot;Changing Node Scale&quot;">​</a></h3><p>Example:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="common-component-interface" tabindex="-1">Common Component Interface <a class="header-anchor" href="#common-component-interface" aria-label="Permalink to &quot;Common Component Interface&quot;">​</a></h2><p><code>Component</code> is the base class of all components, and any component includes the following common interfaces (assuming that we use this to refer to this component in the script of the component):</p><ul><li><code>this.node</code>: The node instance to which this component belongs.</li><li><code>this.enabled</code>: Whether to execute the <code>update</code> method of the component every frame, and also to control whether the renderable component is displayed.</li><li><code>update(deltaTime: number)</code>: As a member method of the component, when the component&#39;s <code>enabled</code> property is <code>true</code>, the code in it will be executed every frame.</li><li><code>onLoad()</code>: Executed when the node where the component is located is initialized (when the node is added to the node tree).</li><li><code>start()</code>: It will be executed before the first <code>update</code> of the component, usually used for logic that needs to be executed after the <code>onLoad</code> of all components is initialized.</li></ul>`,43),o=[n];function h(d,l,p,r,c,k){return s(),i("div",null,o)}const u=e(t,[["render",h]]);export{E as __pageData,u as default};
