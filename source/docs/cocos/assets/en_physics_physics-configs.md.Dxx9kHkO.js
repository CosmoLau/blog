import{_ as s}from"./chunks/set-collider-config.D0IE2Y-u.js";import{_ as t,c as i,o as e,a4 as a}from"./chunks/framework.uQk9_EO2.js";const n="/docs/cocos/assets/physics-config-index.gbu55Jjv.png",o="/docs/cocos/assets/physics-collision.BRGDOybD.png",l="/docs/cocos/assets/collider-matrix.Cx1de2d2.png",r="/docs/cocos/assets/set-group.DZc3zNpm.png",x=JSON.parse('{"title":"Physical System Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"en/physics/physics-configs.md","filePath":"en/physics/physics-configs.md","lastUpdated":1712305443000}'),h={name:"en/physics/physics-configs.md"},p=a('<h1 id="physical-system-configuration" tabindex="-1">Physical System Configuration <a class="header-anchor" href="#physical-system-configuration" aria-label="Permalink to &quot;Physical System Configuration&quot;">​</a></h1><p>The PhysicsSystem module is used to manage the entire physics system and is responsible for synchronizing physics elements, triggering physics events, and scheduling iterations of the physics world.</p><h2 id="physics-configuration" tabindex="-1">Physics Configuration <a class="header-anchor" href="#physics-configuration" aria-label="Permalink to &quot;Physics Configuration&quot;">​</a></h2><p>There exists two ways to configure the physics system, one is to configure it in the editor, and the other is to configure it in the code.</p><h3 id="through-the-physical-configuration-panel" tabindex="-1">Through the Physical Configuration panel <a class="header-anchor" href="#through-the-physical-configuration-panel" aria-label="Permalink to &quot;Through the Physical Configuration panel&quot;">​</a></h3><p>The <strong>Project Settings -&gt; Physical Configuration</strong> allows you to configure the related physics system.</p><p><img src="'+n+`" alt="Physics"></p><table><thead><tr><th style="text-align:left;">Properties</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Gravity X</strong></td><td style="text-align:left;">x-component of gravity</td></tr><tr><td style="text-align:left;"><strong>Gravity Y</strong></td><td style="text-align:left;">y-component of gravity</td></tr><tr><td style="text-align:left;"><strong>Gravity Z</strong></td><td style="text-align:left;">z-component of gravity</td></tr><tr><td style="text-align:left;"><strong>AllowSleep</strong></td><td style="text-align:left;">Allow the system to sleep, default value <code>true</code></td></tr><tr><td style="text-align:left;"><strong>SleepThreshold</strong></td><td style="text-align:left;">The default speed threshold to enter sleep, default value <code>0.1</code>, minimum value <code>0</code></td></tr><tr><td style="text-align:left;"><strong>AutoSimulation</strong></td><td style="text-align:left;">Whether to enable auto simulation, default <code>true</code></td></tr><tr><td style="text-align:left;"><strong>FixedTimeStep</strong></td><td style="text-align:left;">Fixed time per simulation step, default <code>1/60</code>, min <code>0</code></td></tr><tr><td style="text-align:left;"><strong>MaxSubSteps</strong></td><td style="text-align:left;">The maximum number of sub-steps per step, default <code>1</code>, min <code>0</code></td></tr><tr><td style="text-align:left;"><strong>Friction</strong></td><td style="text-align:left;">Friction coefficient, default value <code>0.5</code></td></tr><tr><td style="text-align:left;"><strong>RollingFriction</strong></td><td style="text-align:left;">Rolling friction coefficient, default <code>0.1</code></td></tr><tr><td style="text-align:left;"><strong>SpinningFriction</strong></td><td style="text-align:left;">SpinFriction, default <code>0.1</code></td></tr><tr><td style="text-align:left;"><strong>Restitution</strong></td><td style="text-align:left;">Coefficient of elasticity, default <code>0.1</code></td></tr><tr><td style="text-align:left;"><strong>CollisionMatrix</strong></td><td style="text-align:left;">Collision matrix, for initialization only</td></tr></tbody></table><blockquote><p><strong>Note</strong>: Currently <strong>2D</strong> / <strong>3D</strong> physics share a common configuration.</p></blockquote><h3 id="programmatic-configuration" tabindex="-1">Programmatic configuration <a class="header-anchor" href="#programmatic-configuration" aria-label="Permalink to &quot;Programmatic configuration&quot;">​</a></h3><p>The physics system can be configured via <code>PhysicsSystem.instance</code>. Some code examples are as follows:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component, Node, Vec3, PhysicsSystem } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Example&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Example</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PhysicsSystem.instance.enable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PhysicsSystem.instance.gravity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PhysicsSystem.instance.allowSleep </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p><strong>Note</strong>: The physics system is a singleton class, get an instance of the physics system via <code>PhysicsSystem.instance</code>.</p></blockquote><p>The physics configuration can also be reset through the <code>PhysicsSystem.resetConfiguration</code> interface, with the following code example:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> game.config.physics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conf.gravity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PhysicsSystem.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resetConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(conf);</span></span></code></pre></div><p>For more API content, please check the PhysicsSystem interface please refer to: <a href="./__APIDOC__/en/class/physics.PhysicsSystem">PhysicsSystem API</a>.</p><h2 id="collision-matrix" tabindex="-1">Collision Matrix <a class="header-anchor" href="#collision-matrix" aria-label="Permalink to &quot;Collision Matrix&quot;">​</a></h2><p>The collision matrix is a further wrapper around the <a href="./physics-group-mask">Group and Mask</a> function, which is used to initialize the groups and masks of physics elements.</p><p><img src="`+o+'" alt="physics-collision"></p><p>By default the collision matrix has only one <strong>DEFAULT</strong> group, new groups do not collide with other groups by default.</p><p>Click the <strong>+</strong> button to add a new group. The <strong>Index</strong> and <strong>Name</strong> of the new group cannot be left unfilled.</p><ul><li><strong>Index</strong> represents the collision group value, which supports up to 32 bits, i.e. the value range is <code>[0, 31)</code>. Group values cannot be repeated.</li><li><strong>Name</strong> is the collision group name. The name set here is only for the convenience of the user to configure the collision group, it cannot be obtained by code, only the group value can be obtained by code.</li></ul><p><img src="'+l+'" alt="collider-matrix"></p><p>The figure shows the configuration of a collider group for a flying shooter game. As you can see from the figure, when a group is added, the panel appears with the names of the groups both horizontally and vertically. Let&#39;s call the horizontal part <strong>Group</strong> and the vertical part <strong>Mask</strong>. Suppose we now make the following checkboxes:</p><p><img src="'+s+'" alt="set-collider-config"></p><p>This configuration means that the group <strong>ENEMY_PLANE</strong> can collide with the groups <strong>ENEMY_BULLET</strong> and <strong>SELF_BULLET</strong>. Here the group <strong>ENEMY_BULLET</strong> and <strong>SELF_BULLET</strong> are the masks of the group <strong>ENEMY_PLANE</strong>. Similarly, for the group <strong>ENEMY_BULLET</strong>, <strong>ENEMY_PLANE</strong> is also its mask.</p><p>Once the collision matrix is configured, you can add the <strong>RigidBody</strong> component to the object to be collided with and set the collision group <code>Group</code>.</p><p><img src="'+r+'" alt="set-group"></p><blockquote><p><strong>Note</strong>: groups cannot be deleted before v3.5, but the name of the group can be modified.</p></blockquote>',29),c=[p];function g(d,k,y,E,u,f){return e(),i("div",null,c)}const b=t(h,[["render",g]]);export{x as __pageData,b as default};
