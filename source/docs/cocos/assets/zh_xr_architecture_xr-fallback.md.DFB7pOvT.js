import{_ as a,c as e,o as l,a4 as o}from"./chunks/framework.uQk9_EO2.js";const t="/docs/cocos/assets/native-enable-fallback.CeaHkt4x.png",r="/docs/cocos/assets/native-add-fallback.PNNtrWet.png",i="/docs/cocos/assets/native-fallback-change-scene.CY6frxae.png",n="/docs/cocos/assets/native-enable-fallback-image.BSVN0s-w.png",s="/docs/cocos/assets/web-change-session.BmP-UnqL.png",c="/docs/cocos/assets/web-enable-fallback-img.Cao0Ylkl.png",f=JSON.parse('{"title":"AR 降级","description":"","frontmatter":{},"headers":[],"relativePath":"zh/xr/architecture/xr-fallback.md","filePath":"zh/xr/architecture/xr-fallback.md","lastUpdated":1712336288000}'),p={name:"zh/xr/architecture/xr-fallback.md"},h=o('<h1 id="ar-降级" tabindex="-1">AR 降级 <a class="header-anchor" href="#ar-降级" aria-label="Permalink to &quot;AR 降级&quot;">​</a></h1><p>为了解决市面上部分安卓手机不支持AR功能以及WebXR浏览器和设备覆盖率不高的问题，Cocos CreatorXR提供了一系列解决方案：</p><ol><li>移动设备原生端：引擎内部通过集成设备Sensor数据、相机视频流数据和 <strong>OpenCV</strong> 的图像识别库，来降级原生AR SDK的平面和图像追踪能力的表现效果。</li><li>Web端：引擎内部通过集成浏览器API和 <strong>MindAR</strong> 图像追踪算法库，来降级WebXR的平面和图像追踪能力的表现效果。</li></ol><p>这些方案允许AR应用在不带有AR SDK或不支持WebXR的设备上使用，但是表现效果会有所降低。</p><p>想了解设备是否支持AR，移动设备原生AR SDK支持情况的相关内容请参考<a href="./ar-sdk-summary">各平台 AR SDK 的设备支持情况</a>；WebXR支持情况的相关内容请参考<a href="./../project-deploy/webxr-proj-pub#选择可用的设备和浏览器"> WebXR 的浏览器支持情况</a>。</p><h2 id="降级功能说明" tabindex="-1">降级功能说明 <a class="header-anchor" href="#降级功能说明" aria-label="Permalink to &quot;降级功能说明&quot;">​</a></h2><h3 id="原生端" tabindex="-1">原生端 <a class="header-anchor" href="#原生端" aria-label="Permalink to &quot;原生端&quot;">​</a></h3><h4 id="平台" tabindex="-1">平台 <a class="header-anchor" href="#平台" aria-label="Permalink to &quot;平台&quot;">​</a></h4><p>Android</p><h4 id="系统" tabindex="-1">系统 <a class="header-anchor" href="#系统" aria-label="Permalink to &quot;系统&quot;">​</a></h4><p>OS版本在Android8.0及以上</p><h4 id="平面追踪特性降级" tabindex="-1">平面追踪特性降级 <a class="header-anchor" href="#平面追踪特性降级" aria-label="Permalink to &quot;平面追踪特性降级&quot;">​</a></h4><ol><li><p>开启特性降级功能：选择一个Plane Tracking节点，开启cc.ARPlaneTracking下的Enable auto fallback。</p><p><img src="'+t+'" alt=""></p></li><li><p>添加降级行为效果：在cc.ARPlaneTracking下的Action中新增一个Fallback的行为。</p><p><img src="'+r+'" alt="xr-fallback/native-add-fallback"></p></li><li><p>编辑降级效果：</p><p>设置Display Method为<strong>Z_AXIS_TO_CAMERA</strong>时，Plane Tracking下的子物体按Z轴朝向摄像机的方向进行摆放；</p><p>设置Display Method为<strong>Y_AXIS_TO_CAMERA</strong>时，Plane Tracking下的子物体按Y轴朝向摄像机的方向进行摆放；</p><p><strong>Distance</strong>控制子物体摆放位置和相机的距离。</p><p>设置Display Method为<strong>CHANGE_SCENE</strong>时，Fallback Scene选项填写想要进行跳转的场景名称，即可在运行时直接跳转至此场景。</p><p><img src="'+i+'" alt=""></p></li></ol><h4 id="图像追踪特性降级" tabindex="-1">图像追踪特性降级 <a class="header-anchor" href="#图像追踪特性降级" aria-label="Permalink to &quot;图像追踪特性降级&quot;">​</a></h4><ol><li><p>开启特性在原生端降级功能：选择一个Image Tracking节点，开启cc.ARImageTracking下的<strong>Enable auto fallback in Native</strong>。这里的由于原生端与Web端所采用的降级方案不同，所以需要单独控制两者的降级功能开关。</p><p><img src="'+n+'" alt=""></p></li><li><p>添加降级行为效果：同理，在cc.ARImageTracking下的Action中新增一个Fallback的行为。</p></li><li><p>编辑降级效果：</p><p>设置Display Method为<strong>Z_AXIS_TO_CAMERA</strong>时，Plane Tracking下的子物体按Z轴朝向摄像机的方向进行摆放；</p><p>设置Display Method为<strong>Y_AXIS_TO_CAMERA</strong>时，Plane Tracking下的子物体按Y轴朝向摄像机的方向进行摆放；</p><p><strong>Distance</strong>控制子物体摆放位置和相机的距离。</p><p>设置Display Method为<strong>CHANGE_SCENE</strong>时，Fallback Scene选项填写想要进行跳转的场景名称，即可在运行时直接跳转至此场景。</p></li></ol><h3 id="web端" tabindex="-1">Web端 <a class="header-anchor" href="#web端" aria-label="Permalink to &quot;Web端&quot;">​</a></h3><h4 id="平台-1" tabindex="-1">平台 <a class="header-anchor" href="#平台-1" aria-label="Permalink to &quot;平台&quot;">​</a></h4><p>Android、iOS</p><h4 id="平面追踪特性降级-1" tabindex="-1">平面追踪特性降级 <a class="header-anchor" href="#平面追踪特性降级-1" aria-label="Permalink to &quot;平面追踪特性降级&quot;">​</a></h4><ol><li><p>调整降级场景中的session模式：将XR Agent节点的cc.WebXRSessionController中的Default Session Mode改为IMMERSIVE_AR。</p><p><img src="'+s+'" alt=""></p></li><li><p>同上开启特性降级功能：选择一个Plane Tracking节点，开启cc.ARPlaneTracking下的Enable auto fallback。</p></li><li><p>同上在Action中新增Fallback行为。</p></li></ol><h4 id="图像追踪特性降级-1" tabindex="-1">图像追踪特性降级 <a class="header-anchor" href="#图像追踪特性降级-1" aria-label="Permalink to &quot;图像追踪特性降级&quot;">​</a></h4><ol><li><p>同上，调整降级场景中的session模式：将XR Agent节点的cc.WebXRSessionController中的Default Session Mode改为IMMERSIVE_AR。</p></li><li><p>开启Web端的降级方案：选择场景中的Image Tracking节点，开启cc.WebXRSessionController组件中的<strong>Adaptive enable 3rd AR Library in Web</strong>。</p><p><img src="'+c+'" alt=""></p></li><li><p>此时无需添加Fallback的Action，在Web端即可正常运行图像追踪场景，并达到与WebXR同样追踪效果。</p></li></ol><h2 id="提醒" tabindex="-1">提醒 <a class="header-anchor" href="#提醒" aria-label="Permalink to &quot;提醒&quot;">​</a></h2><ul><li>除Web端的图像追踪以外，其他特性只能同步设备的传感器数据做3轴旋转追踪。</li><li>由于降级方案采用了第三方库和设备自身的传感器来支持，稳定性低于正常AR功能。</li><li>Web端部分设备需要用户主动触发用户行为后才能访问设备权限。</li><li>Web端图像追踪降级方案使用了第三方提供的图像特征转换工具，构建后的包体大小会有一定量增长。</li></ul>',24),d=[h];function b(g,_,k,A,m,u){return l(),e("div",null,d)}const P=a(p,[["render",b]]);export{f as __pageData,P as default};
