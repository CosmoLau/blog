import{_ as s,c as i,o as a,a5 as e}from"./chunks/framework.CqnjdYks.js";const g=JSON.parse('{"title":"网页预览定制工作流程","description":"","frontmatter":{},"headers":[],"relativePath":"zh/manual/editor/preview/browser.md","filePath":"zh/manual/editor/preview/browser.md"}'),t={name:"zh/manual/editor/preview/browser.md"},n=e(`<h1 id="网页预览定制工作流程" tabindex="-1">网页预览定制工作流程 <a class="header-anchor" href="#网页预览定制工作流程" aria-label="Permalink to &quot;网页预览定制工作流程&quot;">​</a></h1><h2 id="自定义预览模板" tabindex="-1">自定义预览模板 <a class="header-anchor" href="#自定义预览模板" aria-label="Permalink to &quot;自定义预览模板&quot;">​</a></h2><p>预览支持自定义模板方便用户自定义需要的预览效果，自定义的预览模板可以放置在项目目录的 <code>preview-template</code> 文件夹中。或者点击编辑器主菜单中的 <strong>项目 -&gt; 生成预览模板</strong> 就可以在项目目录下创建一个最新的预览模板。编辑器中的预览也是使用模板来注入最新的项目数据，预览时将会查找该目录下的 index 文件，如果存在就是要该文件作为预览的模板。</p><p><code>preview-template</code> 文件夹的结构类似：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">project</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">folder</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assets</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">build</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">preview</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">template</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // 必须的入口文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     |--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.ejs</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // 其他文件可根据想要实现的预览效果进行添加</span></span></code></pre></div><p>开始自定义网页预览，需要注意的是，预览模板中存在一些预览菜单项以及预览调试工具等内容，所以在增删一些模板语法的内容时要稍加注意，如果随意修改可能会导致预览模板不可用。建议使用 ejs 注入的内容都保留，然后在此基础上添加需要的内容即可。另外，假如 <code>index.html</code> 与 <code>index.ejs</code> 共存时，<strong><code>index.html</code> 将会替代 <code>index.ejs</code></strong> 成为预览的页面内容。</p><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to &quot;使用示例&quot;">​</a></h2><p>以下示例可以在 <a href="https://github.com/cocos/cocos-test-projects/tree/v3.7/preview-template" target="_blank" rel="noreferrer">GitHub</a> | <a href="https://gitee.com/mirrors_cocos-creator/test-cases-3d/tree/v3.7/preview-template" target="_blank" rel="noreferrer">Gitee</a> 查找到。</p><ol><li><p>点击编辑器主菜单中的 <strong>项目 -&gt; 生成预览模板</strong>，<strong>控制台</strong> 便会输出“预览模板生成成功”的提示，并显示预览模板的生成路径。</p></li><li><p>添加需要使用的脚本如 <code>test.js</code>，其中 <code>&lt;%- include(cocosTemplate, {}) %&gt;</code> 中包含的是默认的启动游戏逻辑，添加的脚本可以根据需要在游戏逻辑启动前/后来决定存放的位置。下面的 <code>test.js</code> 是在游戏启动后加载。</p><ul><li><p>打开 <code>index.ejs</code> 修改如下：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ...</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%- include(cocosTemplate, {}) %&gt; // 游戏启动处理逻辑</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/test.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; // 新增脚本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><p><code>test.js</code> 放置在页面内标识的相对路径（只能在 <code>preview-template</code> 文件夹中）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>|--preview-template</span></span>
<span class="line"><span>        |--index.ejs</span></span>
<span class="line"><span>        |--test.js</span></span></code></pre></div></li></ul></li></ol>`,9),l=[n];function p(h,r,k,d,o,c){return a(),i("div",null,l)}const y=s(t,[["render",p]]);export{g as __pageData,y as default};
